<cms-block ctrl="ctrl" key="state-password" ng-cloak>
    <div class="password-view">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <h2 class="page-title" translate="password.title" translate-values="{username: '{{ctrl.getLogin()}}'}"></h2>
                <div class="alert alert-success" ng-show="ctrl.getSuccess()" translate="password.messages.success"></div>
                <div class="alert alert-danger" ng-show="ctrl.getError()" translate="{{ctrl.getErrorMessage()}}"></div>
                <div class="alert alert-danger" ng-show="ctrl.getDoNotMatch()" translate="global.messages.error.dontmatch"></div>
                <form name="form" role="form" novalidate ng-submit="ctrl.changePassword(form)" show-validation>
                    <div class="form-group">
                        <label for="currentPassword" class="required" translate="global.form.currentPassword"></label>
                        <input type="password" class="form-control" id="currentPassword" name="currentPassword" placeholder="{{'global.form.currentPassword.placeholder' | translate}}" ng-model="ctrl.data.currentPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="newPassword" class="required" translate="global.form.newPassword"></label>
                        <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="{{'global.form.newPassword.placeholder' | translate}}" ng-model="ctrl.data.newPassword" ng-minlength=5 ng-maxlength=50 required>
                        <div ng-show="form.newPassword.$dirty && form.newPassword.$invalid">
                            <p class="help-block" ng-show="form.newPassword.$error.required" translate="global.messages.validate.newPassword.required"></p>
                            <p class="help-block" ng-show="form.newPassword.$error.minlength" translate="global.messages.validate.newPassword.minlength"></p>
                            <p class="help-block" ng-show="form.newPassword.$error.maxlength" translate="global.messages.validate.newPassword.maxlength"></p>
                        </div>
                        <password-strength-bar password-to-check="ctrl.data.newPassword"></password-strength-bar>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword" class="required" translate="global.form.confirmPassword"></label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="{{'global.form.confirmPassword.placeholder' | translate}}" ng-model="ctrl.data.confirmPassword" ng-minlength=5 ng-maxlength=50 required>
                        <div ng-show="form.confirmPassword.$dirty && form.confirmPassword.$invalid">
                            <p class="help-block" ng-show="form.confirmPassword.$error.required" translate="global.messages.validate.confirmPassword.required"></p>
                            <p class="help-block" ng-show="form.confirmPassword.$error.minlength" translate="global.messages.validate.confirmPassword.minlength"></p>
                            <p class="help-block" ng-show="form.confirmPassword.$error.maxlength" translate="global.messages.validate.confirmPassword.maxlength"></p>
                        </div>
                    </div>
                    <button type="submit" ng-disabled="form.$invalid || form.$pristine" class="btn btn-primary" translate="password.form.button"></button>
                </form>
            </div>
        </div>
    </div>
</cms-block>