<div class="header">

    <announcement ng-if="ctrl.isAuthenticated()"></announcement>

    <div class="site-container">
        <div class="site-header">
            <div class="site-header-left">
                <div class="site-header-logo">
                    <a ui-sref="home">
                        <div class="svgicon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 690.2 175.2" height="40">
                                <path style="fill:#ffffff;" d="M81.2 133.3H39.3a4.5 4.5 0 100 9h42a4.5 4.5 0 000-9zM77 151.2H43.3a4.5 4.5 0 000 9H77a4.5 4.5 0 000-9zM71.3 15.3A4.5 4.5 0 0069 24a37.7 37.7 0 0128.5 36c0 8.4-3.8 16.8-8 25.6a88.9 88.9 0 00-9.7 29.9H64.4l.3-63.5 11 11a4.5 4.5 0 006.4-6.3L63.5 38l-.2-.1a4.5 4.5 0 00-.5-.5 3.1 3.1 0 00-.4-.1L62 37l-.4-.1a2.6 2.6 0 00-.4-.1 3.8 3.8 0 00-.7-.1H60a4.5 4.5 0 00-.7 0l-.4.2h-.4l-.5.3-.3.2a4.6 4.6 0 00-.7.5L38.3 56.7a4.5 4.5 0 006.4 6.3l11-11-.3 63.5H40.7c-1.1-10.8-5.4-20-9.5-28.8S23 69.3 23 60a36.8 36.8 0 0128.5-36 4.5 4.5 0 00-2-8.9A45.8 45.8 0 0014.1 60c0 11.3 4.5 21 9 30.5s8.7 18.7 8.8 29.6a4.5 4.5 0 004.5 4.4h47.8a4.5 4.5 0 004.5-4.5c0-11.1 4.6-21 9.1-30.6 4.4-9.3 8.8-19 8.8-29.4a46.8 46.8 0 00-35.3-44.7z" class="cls-1"/>
                                <path style="fill:#ffffff;" d="M156 74.8A29.6 29.6 0 11186 45a29.5 29.5 0 01-30 29.7zm0-51.3c-11.8 0-21 9.3-21 21.6s9.2 21.7 21 21.7 21.3-9.4 21.3-21.7S168 23.4 156 23.4zM194.3 32h8v4a19 19 0 0112.9-4.6c11.8 0 21 9.4 21 21.5S227 74.5 215 74.5a21.1 21.1 0 01-12.6-4v20.3h-8.2zm8.2 11.6v18.8a15.5 15.5 0 0011.6 5A14 14 0 00228.2 53a14 14 0 00-14-14.4 15 15 0 00-11.7 5zM264.3 74.6a21.5 21.5 0 01-22-21.7 21 21 0 0121-21.5c11.5 0 20.2 9.5 20.2 21.9v2.3h-33a14 14 0 0014.1 12 16.3 16.3 0 0010.6-3.7l5.2 5.2a24.9 24.9 0 01-16.1 5.5zm-13.7-25.1h24.8C274 43 269.2 38.3 263 38.3c-6.3 0-11.3 4.5-12.5 11.2zM291.3 32h8.2v4.3a17.2 17.2 0 0112.6-5c9.6 0 16.3 6.6 16.3 16.3v26.2h-8.2V49c0-6.6-4-10.6-10.4-10.6a11.8 11.8 0 00-10.3 5.4v30h-8.2zM356 16.4h8.6v49.8h33.1v7.6H356zM423.3 74.6a21.5 21.5 0 01-22-21.7 21 21 0 0121-21.5c11.5 0 20.2 9.5 20.2 21.9v2.3h-33a14 14 0 0014.1 12 16.3 16.3 0 0010.6-3.7l5.3 5.2a24.9 24.9 0 01-16.2 5.5zm-13.7-25.1h24.8c-1.2-6.4-6.2-11.2-12.2-11.2-6.4 0-11.4 4.5-12.6 11.2zM447.7 61.9c0-8 6.4-12.8 16.9-12.8a29.7 29.7 0 0111.4 2.3V47c0-6-3.5-8.9-10.2-8.9a30 30 0 00-13 3.6l-3-6.2c6.3-3 11.7-4.3 17.2-4.3 10.8 0 17 5.4 17 15v27.6h-8v-3.6a19.8 19.8 0 01-13 4.4c-9 0-15.3-5.2-15.3-12.7zm17.2 6.6a16.1 16.1 0 0011.1-4v-7.1a21.8 21.8 0 00-10.8-2.6c-6 0-9.6 2.7-9.6 6.9s3.7 6.8 9.3 6.8zM493.5 32h8.2v5.4a13 13 0 0111.5-6.2 10.5 10.5 0 014.2.6v7.4a14.2 14.2 0 00-4.9-.9c-4.8 0-8.7 2.6-10.8 7.6v28h-8.2zM524 32h8.2v4.3a17.2 17.2 0 0112.6-5c9.6 0 16.3 6.6 16.3 16.3v26.2H553V49c0-6.6-4-10.6-10.3-10.6a11.8 11.8 0 00-10.4 5.4v30H524zM569.6 20.3a5 5 0 015-5.1 5 5 0 110 10.1 5 5 0 01-5-5zm9.1 53.5h-8.2V32.1h8.2zM588.4 32h8.2v4.3a17.2 17.2 0 0112.6-5c9.6 0 16.3 6.6 16.3 16.3v26.2h-8.2V49c0-6.6-4-10.6-10.3-10.6a11.8 11.8 0 00-10.4 5.4v30h-8.2zM633 52.8a21 21 0 0121.2-21.5 20.5 20.5 0 0112.4 4.2v-3.4h8.2v42.3c0 10.9-6.9 17-19.2 17a35.5 35.5 0 01-16.8-4.2l3.2-6.4a28.2 28.2 0 0013.4 3.6c7.3 0 11.1-3.4 11.1-10v-4.7a19.7 19.7 0 01-12.4 4.5 21 21 0 01-21-21.4zM655 67a14.8 14.8 0 0011.5-4.8V43.3a15 15 0 00-11.5-4.8 14 14 0 00-13.9 14.3 14 14 0 0014 14.2zM128.7 102.4h26.6c11.2 0 18.7 7 18.7 17.2 0 10.1-7.6 17.1-18.7 17.1h-18v23.1h-8.7zm8.6 7.5v19.5h17c6.8 0 11-3.8 11-9.8s-4.2-9.7-11-9.7zM190.2 159.8h-8.3v-57.4l8.2-1.8zM197.7 147.9c0-8 6.4-12.8 17-12.8a29.6 29.6 0 0111.3 2.3V133c0-6-3.5-8.9-10.2-8.9a30 30 0 00-13 3.6l-3-6.2c6.3-3 11.7-4.3 17.2-4.3 10.8 0 17 5.4 17 15v27.6h-8v-3.6a19.8 19.8 0 01-13 4.4c-9 0-15.3-5.2-15.3-12.7zm17.2 6.6a16 16 0 0011.1-4v-7.1a21.7 21.7 0 00-10.8-2.6c-6 0-9.6 2.7-9.6 7 0 4 3.8 6.7 9.3 6.7zM247.3 125h-8.9v-6.9h8.9v-10.7l8.1-2V118h12.3v7h-12.3v22.7c0 4.2 1.7 5.8 6.2 5.8a16 16 0 006-1v6.9a27 27 0 01-7.8 1.2c-8.2 0-12.5-3.8-12.5-11zM280.9 118v-6.3c0-8.7 5-13.4 14.2-13.4a21.6 21.6 0 015.9.7v7.2a16.3 16.3 0 00-5.2-.8c-4.5 0-6.7 2-6.7 6.5v6.2H301v6.9h-11.9v34.9h-8.2V125h-9.7v-6.9zM325.4 117.3a21.7 21.7 0 11-21.8 21.6 21.4 21.4 0 0121.8-21.7zm13.6 21.6c0-8.1-6-14.4-13.6-14.4s-13.7 6.3-13.7 14.4 6 14.5 13.7 14.5c7.5 0 13.6-6.3 13.6-14.5zM354.8 118h8.2v5.4a13 13 0 0111.5-6.2 10.5 10.5 0 014.2.6v7.4a14.2 14.2 0 00-4.9-.9c-4.8 0-8.7 2.6-10.8 7.6v28h-8.2zM385.3 118h8.2v4a16 16 0 0111.7-4.8 14.5 14.5 0 0113 7 16.7 16.7 0 0114-7c9.2 0 15.7 6.7 15.7 16.4v26.2h-8.2V135c0-6.6-3.7-10.6-9.6-10.6a11.2 11.2 0 00-9.8 5.6 17.2 17.2 0 01.4 3.6V160h-8.2V135c0-6.6-3.6-10.6-9.6-10.6a11 11 0 00-9.4 5.1v30.4h-8.2z"/>
                            </svg>
                        </div>
                    </a>
                </div>

                <div class="site-header-main-nav">

                    <div class="dropdown site-header-dashboard" ng-if="authenticated">
                        <a ui-sref="home">
                            Dashboard
                        </a>
                        <a data-toggle="dropdown" href="javascript:;">
                            <img class="svg chevron-down" src="assets/images/chevron-down.svg" />
                            <img class="svg chevron-up" src="assets/images/chevron-up.svg" />
                        </a>
                        <ul class="dropdown-menu site-header-dashboard-dropdown" ng-if="authenticated">
                            <li><a ui-sref="home">Overview</a></li>
                            <li><a ui-sref="discover">Discover</a></li>
                            <li ng-if="account.manager"><a ui-sref="team-individual">Team</a></li>
                        </ul>
                    </div>

                    <div class="dropdown  site-header-categories" ng-if="authenticated">
                        <a ui-sref="search">
                            Catalog
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;">
                            <img class="svg chevron-down" src="assets/images/chevron-down.svg" />
                            <img class="svg chevron-up" src="assets/images/chevron-up.svg" />
                        </a>
                        <ul class="dropdown-menu site-header-categories-dropdown" ng-if="authenticated">
                            <li ng-repeat="c in catalogs"><a ng-if="c.name.length > 0" href="" ng-click="ctrl.selectCatalog(c)"><span ng-bind="c.name"></span></a></li>
                        </ul>
                    </div>

                    <div class="site-header-calendar" ng-if="authenticated">
                        <a ui-sref="calendar">
                            Calendar
                        </a>
                    </div>
                </div>

                <div class="site-header-search" ng-if="authenticated">
                    <form ng-submit="ctrl.search(searchValue)">
                        <div class="icon-button-left svgicon" ng-click="ctrl.search(searchValue)">
                            <img src="assets/images/search.svg" class="svg" />
                        </div>
                        <input ng-model="searchValue" type="text" placeholder="Search learning resources" />
                    </form>
                </div>
            </div>
            <div class="site-header-secondary" ng-if="authenticated">
                <ul class="site-header-nav">
<!--                    <li><a href="" data-toggle="modal" data-target="#feedbackModal" ng-click="ctrl.refreshFeedback()" uib-tooltip="Feedback" tooltip-placement="bottom">-->
<!--                            <img src="assets/images/message-circle.svg" class="svg" />-->
<!--                        </a>-->
<!--                    </li>-->
                    <li>
                        <a href="" data-toggle="modal" data-target="#helpModal" uib-tooltip="Help" tooltip-placement="bottom">
                            <img src="assets/images/help-circle.svg" class="svg" />
                        </a>
                    </li>
                        <a href="" data-toggle="modal" data-target="#notificationsModal" ng-click="ctrl.loadNotifications()" uib-tooltip="Notifications" tooltip-placement="bottom">
                            <img src="assets/images/bell.svg" class="svg" />
                            <div class="label" style="margin-right: 0;" ng-if="notificationUnread > 0"><span ng-bind="notificationUnread"></span></div>
                        </a>
                    </li>
                    <li class="dropdown-profile">
                        <a data-toggle="dropdown" href="javascript:;" aria-haspopup="true" aria-expanded="false" uib-tooltip="Profile" tooltip-placement="bottom">
                            <img src="assets/images/user.svg" class="svg" />
                        </a>
                        <ul class="dropdown-menu site-header-profile-dropdown" ng-if="authenticated">
                            <div class="dropdown-profile-main">
                                <div class="profile-image">
                                    <img ng-src="{{profileImageUrl}}" ng-if="profileImageUrl" on-error-src="header-profile-default-image" />
                                    <span id="header-profile-default-image"></span>
                                </div>
                                <div class="profile-name">
                                    <h4><span ng-bind="profile.displayName"></span></h4>
                                    <h5><span ng-bind="profile.emailAddress"></span></h5>
                                </div>
                            </div>
                            <div class="profile-links">
                                <ul>
                                    <li><a href="#/profile/main" ui-sref-active="active" ui-sref="profile-main">View Profile</a></li>
                                    <li><a href="#/profile/external-learning" ui-sref-active="active" ui-sref="profile-external-learning">Add External Learning</a></li>
                                    <li><a href="#/profile/preferences" ui-sref-active="active" ui-sref="profile-preferences">Preferences</a></li>
                                    <li class="profile-links-signout"><a href="#/logout" ui-sref-active="logout" ui-sref="logout">Sign Out</a></li>
                                </ul>
                            </div>


                        </ul>
                    </li>
                </ul>
            </div>
            <div class="site-header-responsive">
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#responsiveDropdown" aria-controls="responsiveDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="fa fa-2x fa-bars"></span>
                </button>
            </div>
        </div>
    </div>

    <div class="collapse navbar-collapse responsive-dropdown" id="responsiveDropdown" ng-if="authenticated">
        <ul class="navbar-nav">
            <li class="nav-item header-icons">
<!--                <a href="" data-toggle="modal" data-target="#feedbackModal" ng-click="ctrl.refreshFeedback()" uib-tooltip="Feedback" tooltip-placement="bottom">-->
<!--                    <img src="assets/images/message-circle.svg" class="svg" />-->
<!--                </a>-->
                <a href="" data-toggle="modal" data-target="#helpModal" uib-tooltip="Help" tooltip-placement="bottom">
                    <img src="assets/images/help-circle.svg" class="svg" />
                </a>
                <a href="" data-toggle="modal" data-target="#notificationsModal" ng-click="ctrl.loadNotifications()" uib-tooltip="Notifications" tooltip-placement="bottom">
                    <img src="assets/images/bell.svg" class="svg" />
                    <div class="label" ng-if="notificationUnread > 0"><span ng-bind="notificationUnread"></span></div>
                </a>
                <a ui-sref="profile-main" uib-tooltip="Profile" tooltip-placement="bottom">
                    <img src="assets/images/user.svg" class="svg" />
                </a>
            </li>
            <li class="nav-item">
                <form ng-submit="ctrl.search(searchValue)">
                    <input class="site-header-search-input-responsive" ng-model="searchValue" type="text" placeholder="Search learning resources" />
                    <div class="icon-button-left svgicon" ng-click="ctrl.search(searchValue)">
                        <img src="assets/images/search.svg" class="svg" />
                    </div>
                </form>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="home">Dashboard</a>
            </li>
            <li class="nav-item">
                <ul>
                    <li>
                        <a class="nav-link" ui-sref="home">Overview</a>
                    </li>
                    <li>
                        <a class="nav-link" ui-sref="discover">Discover</a>
                    </li>
                    <li ng-if="account.manager">
                        <a ui-sref="team-learning-path">Team</a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="catalog">Catalog</a>
            </li>
            <li>
                <ul>
                    <li ng-repeat="c in catalogs"><a ng-if="c.name.length > 0" href="" ng-click="ctrl.selectCatalog(c)"><span ng-bind="c.name"></span></a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" ui-sref="calendar">Calendar</a>
            </li>
        </ul>
    </div>
</div>

<div class="feedback-modal modal fade" id="feedbackModal" tabindex="-1" role="dialog" aria-labelledby="feedbackModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-header">
                <div class="header-title">
                </div>
                <div class="header-close">
                    <button type="button" class="close" data-dismiss="modal">
                        <img class="svg svg-black" src="assets/images/x.svg">
                    </button>
                </div>
            </div>

            <div class="modal-body" ng-if="!feedback.sent">
                <div class="feedback-message">
                    <h4>Have feedback or an idea for improving this site? You're in the right place!</h4>
                </div>
                <div class="form-group">
                    <label>Type <span class="required-star">*</span></label>
                    <select id="issueType" class="form-control" ng-model="feedback.type">
                        <option value="ENHANCEMENT" selected>Make a suggestion</option>
                        <option value="BUG">Report a Bug</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Feedback <span class="required-star">*</span></label>
                    <textarea type="text" class="feedback-feedbackta form-control" cols="50" rows="5" ng-model="feedback.message" required></textarea>
                    <span class="error-message" ng-if="feedback.messageRequired">Feedback is required</span>
                </div>
                <div class="modal-body-button-bar">
                    <div class="pull-right feedback-button">
                        <input type="hidden" ng-model="feedback.url" />
                        <button class="primary" ng-click="ctrl.sendFeedback()">Send feedback</button>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="modal-body" ng-if="feedback.sent">
                <p class="success">Feedback has been submitted successfully. Thanks!</p>
            </div>
        </div>

    </div><!-- modal-content -->
</div><!-- modal-dialog -->
</div><!-- modal -->

<div class="helpModal modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="feedbackModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-header">
                <div class="header-title">
                </div>
                <div class="header-close">
                    <button type="button" class="close" data-dismiss="modal">
                        <img class="svg svg-black" src="assets/images/x.svg">
                    </button>
                </div>
            </div>

            <div class="modal-body">
                <div class="feedback-message">
                    <h4>Help and Contact Information</h4>
                </div>
                <div class="help-information">
                    Visit this <a href="#">link</a> to view our FAQs.
                </div>
                <div class="contact-information">
                    For support questions, <a href="mailto:support@opl.com"> Email Us</a>.
                </div>
            </div>
            <div class="modal-body" ng-if="feedback.sent">
                <p class="success">Feedback has been submitted successfully. Thanks!</p>
            </div>
        </div>

    </div><!-- modal-content -->
</div><!-- modal-dialog -->
</div><!-- modal -->


<div class="notifications-modal modal right fade" id="notificationsModal" tabindex="-1" role="dialog" aria-labelledby="notificationsModalLabel2">
    <div class="modal-dialog" role="document">
        <div class="modal-content">

            <div class="modal-header">
                <div class="header-title">
                    <div class="header-title-icon">
                        <img class="svg svg-black" src="assets/images/bell.svg" />
                    </div>
                    <div class="header-title-text">
                        <h4 class="modal-title" id="notificationsModalLabel2">Notifications</h4>
                    </div>
                </div>
                <div class="header-close">
                    <button type="button" class="close" data-dismiss="modal">
                        <img class="svg svg-black" src="assets/images/x.svg">
                    </button>
                </div>
            </div>


            <div class="modal-body" ng-if="loadingNotifications">
                <div class="notification-container" ng-repeat="thing in ctrl.getNumArray(7) track by $index">
                    <div class="skeleton-view">
                        <div class="skeleton-row">
                            <div class="skeleton-column">
                                <h1></h1>
                                <h6></h6>
                            </div>
                            <div class="skeleton-column right">
                                <h5></h5>
                                <h6></h6>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-body" ng-if="!loadingNotifications">
                <div class="notification-clearall" ng-if="ctrl.data.notifications && ctrl.data.notifications.length > 0">
                    <button class="alternative" ng-click="ctrl.dismissAll()">Clear all notifications</button>
                </div>
                <div class="notification-container" ng-repeat="notification in ctrl.data.notifications track by $index">
                    <div class="notification-body">
                        <div class="notification-body__content">
                            <p class="time-since pull-right"><span ng-bind="notification.humanDate"></span></p>
                            <h6><span ng-bind="notification.title"></span></h6>
                            <p><span ng-bind="notification.message"></span></p>
                        </div>
                        <div class="notification-body__controls">
                            <a ng-click="ctrl.onCloseNotificationClick(notification, $index)">Dismiss</a>
                            <a ng-if="notification.type != 'UNSHARED_PATH' && notification.type != 'SHARED_PATH' && notification.type != 'DUE_DATE'" ui-sref="notifications-user({link: notification.link})">More details</a>
                            <a ng-if="notification.type == 'SHARED_PATH' || notification.type == 'DUE_DATE'" ui-sref="learning-path({id: notification.subjectId, personal: true})">More details</a>
                        </div>
                    </div>

                </div>
            </div>


        </div><!-- modal-content -->
    </div><!-- modal-dialog -->
</div><!-- modal -->
