<cms-block ctrl="ctrl" key="state-health" ng-cloak>
    <div class="health-view">
        <h2 class="page-title" translate="health.title">Application Health Check</h2>
        <p>
            <button type="button" class="btn btn-primary" ng-click="ctrl.refresh()"><span class="glyphicon glyphicon-refresh"></span>&nbsp;<span translate="health.refresh.button">Refresh</span></button>
        </p>
        <div class="panel panel-default panel-table">
            <div class="panel-body">
                <div class="table-responsive-plain">
                    <table id="healthCheck" class="panel-table table table-striped">
                        <thead>
                            <tr>
                                <th class="col-md-7" translate="health.table.service"></th>
                                <th class="col-md-2 text-center" translate="health.table.status"></th>
                                <th class="col-md-2 text-center" translate="health.details.details"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="health in ctrl.getHealthData()">
                                <td><span ng-bind="'health.indicator.' + ctrl.baseName(health.name) | translate"></span><span ng-bind="ctrl.subSystemName(health.name)"></span></td>
                                <td class="text-center">
                                    <span class="label" ng-class="ctrl.getLabelClass(health.status)" ng-bind="'health.status.' + health.status | translate"></span>
                                </td>
                                <td class="text-center">
                                    <a class="hand" ng-click="ctrl.showHealth(health)" ng-show="health.details || health.error">
                                        <i class="glyphicon glyphicon-eye-open"></i>
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</cms-block>
